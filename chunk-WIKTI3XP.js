import{$a as T,Aa as j,Ba as u,Ca as k,Da as se,Ea as h,Fa as V,Ga as le,Ha as R,Ia as M,J as A,Ja as q,Ka as ce,O as _,Q as P,Ta as pe,X as O,Y as D,_a as E,da as re,ea as $,la as m,oa as W,ra as ae,sa as f,ta as ie,ua as S,va as b,wa as v,xa as a,ya as l,za as d}from"./chunk-BDQKRC45.js";var N=(r=>(r.Astar="A*",r.BFS="BFS",r.DFS="DFS",r.BestFS="Best First Search",r.HillClimb="HillClimb",r))(N||{});var y={3:"bg-grey",2:"bg-grey-3",0:"bg-green",1:"bg-red",4:"bg-blue",5:"bg-light-green"};var me={0:"#",1:"&",2:"-",3:"*",4:"@",5:"+"},p=class{_icon="*";_type=3;_position;costFromSource;distanceToTarget;totalCost=0;parent;constructor({x:e,y:t},i=null,n=0,r=0,s=3){this._position={x:e,y:t},this._icon=me[s],this._type=s,this.costFromSource=n,this.distanceToTarget=r,this.totalCost=n+r,this.parent=i}get position(){return this._position}get type(){return this._type}set type(e){this._type=e,this._icon=me[e]}get icon(){return this._icon}set icon(e){this._icon=e}};var G=class o{type=$.required();position=$.required();cellOnClick=re();backgroundClass=pe(()=>y[this.type()]);static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-cell"]],inputs:{type:[1,"type"],position:[1,"position"]},outputs:{cellOnClick:"cellOnClick"},standalone:!0,features:[M],decls:1,vars:4,consts:[[1,"cell",3,"click","title","ngClass"]],template:function(t,i){t&1&&(a(0,"div",0),u("click",function(){return i.cellOnClick.emit(i.position())}),l()),t&2&&(se("title","",i.position().x," , ",i.position().y,""),f("ngClass",i.backgroundClass()))},dependencies:[T,E],encapsulation:2,changeDetection:0})};var z=class o{_turnCellInto=W(2);get turnCellInto(){return this._turnCellInto()}set turnCellInto(e){this._turnCellInto.set(e)}_selectedAlgorithm=W("A*");get selectedAlgorithmAsSignal(){return this._selectedAlgorithm.asReadonly()}get selectedAlgorithm(){return this._selectedAlgorithm()}set selectedAlgorithm(e){this._selectedAlgorithm.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"})};var x=class o{_mazeMatrix=W([]);get mazeMatrixAsSignal(){return this._mazeMatrix.asReadonly()}set mazeMatrix(e){this._mazeMatrix.set(e)}get mazeAsStringMatrix(){return this._mazeMatrix().map(e=>e.map(({icon:t})=>t))}_sourcePos;get sourcePos(){return this._sourcePos}_targetPos;get targetPos(){return this._targetPos}updateCellType({x:e,y:t},i){this._mazeMatrix()[e][t].type!==i&&this._mazeMatrix.update(n=>(n[e][t].type=i,n))}buildMaze(e){let t=[];for(let i=0;i<e;i++){t.push([]);for(let n=0;n<e;n++)t[i].push(new p({x:i,y:n}))}this._mazeMatrix.set(t)}clear(e){this._mazeMatrix.update(t=>(t.forEach(i=>{i.forEach(n=>{n.type===e&&(n.type=3)})}),t))}clearMaze(){this.clear(2),this.clear(4),this.clear(5),this.clear(0),this.clear(1),this._sourcePos=void 0,this._targetPos=void 0}turnCellInto(e,t){switch(t){case 2:let{x:i,y:n}=e,{type:r}=this._mazeMatrix()[i][n];this.updateCellType(e,r===2?3:2);break;case 0:this.sourcePos&&this.updateCellType(this.sourcePos,3),this.updateCellType(e,0),this._sourcePos=e;break;case 1:this.targetPos&&this.updateCellType(this.targetPos,3),this.updateCellType(e,1),this._targetPos=e;break}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=A({token:o,factory:o.\u0275fac})};var F=(o,e)=>Math.abs(o.x-e.x)+Math.abs(o.y-e.y),ue=(o,e)=>{let t=e.x-o.x,i=e.x-o.y;return Math.sqrt(t*t+i*i)};var w=(o,e)=>!o||!e?!1:o.x===e.x&&o.y===e.y;var g=class{_heuristic;_maze;_mazeRows;_mazeColumns;_sourcePos;_targetPos;_path=[];_expandedCells=[];_directions=[[0,1],[1,0],[0,-1],[-1,0]];constructor(e,t,i,n=ue){this._maze=e,this._mazeRows=e.length,this._mazeColumns=e[0].length,this._heuristic=n,this._sourcePos=t??void 0,this._targetPos=i??void 0}get path(){return this._path.slice(1,this._path.length-1)}get expanded(){return this._expandedCells.slice(1,this._expandedCells.length-1)}backtrackingPath(e){let t=[],i=e;for(;i;)t.push({x:i.position.x,y:i.position.y}),i=i.parent;return t.reverse()}isTarget({x:e,y:t}){return this._maze[e][t]==="&"}canAccessCell({x:e,y:t},i=[]){return e>=0&&e<this._mazeRows&&t>=0&&t<this._mazeColumns&&this._maze[e][t]!=="-"&&!i.some(({position:n})=>n.x===e&&n.y===t)}run(){throw new Error("run() method must be implemented!")}};var U=class extends g{constructor(e,t,i,n=F){super(e,t,i,n)}run(){let e=new p(this._sourcePos),t=new p(this._targetPos);e.distanceToTarget=this._heuristic(e.position,t.position),e.totalCost=e.distanceToTarget;let i=[e],n=[];for(;i.length;){i.sort((s,c)=>s.totalCost-c.totalCost);let r=i.shift();if(this._expandedCells.push(r.position),w(r.position,t.position)){this._path=this.backtrackingPath(r);return}n.push(r);for(let[s,c]of this._directions){let C=r.position.x+s,H=r.position.y+c;if(this.canAccessCell({x:C,y:H},n)){let ee=r.costFromSource+1,I=i.find(({position:te})=>w(te,{x:C,y:H}));if(!I)i.push(new p({x:C,y:H},r,ee,this._heuristic({x:C,y:H},t.position)));else if(ee<I.costFromSource){let{costFromSource:te,distanceToTarget:fe}=I;I.costFromSource=ee,I.totalCost=te+fe,I.parent=r}}}}}};var X=class extends g{constructor(e,t,i,n=F){super(e,t,i,n)}run(){let e=[new p(this._sourcePos)],t=new Set;for(;e.length;){e.sort((n,r)=>n.distanceToTarget-r.distanceToTarget);let i=e.shift();if(this._expandedCells.push(i.position),w(i.position,this._targetPos)){this._path=this.backtrackingPath(i);return}t.add(`${i.position.x},${i.position.y}`);for(let[n,r]of this._directions){let s={x:i.position.x+n,y:i.position.y+r};if(this.canAccessCell(s)&&!t.has(`${s.x},${s.y}`)){let c=this._heuristic(s,this._targetPos),C=new p(s,i,0,c);e.push(C),t.add(`${s.x},${s.y}`)}}}}};var Y=class extends g{constructor(e,t){super(e,t)}run(){let e=[new p(this._sourcePos)],t=new Set;for(;e.length;){let i=e.shift();if(this._expandedCells.push(i.position),this.isTarget(i.position)){this._path=this.backtrackingPath(i);return}t.add(`${i.position.x},${i.position.y}`);for(let[n,r]of this._directions){let s={x:i.position.x+n,y:i.position.y+r};if(this.canAccessCell(s)&&!t.has(`${s.x},${s.y}`)){let c=new p(s,i);e.push(c),t.add(`${s.x},${s.y}`)}}}}};var Z=class extends g{constructor(e,t){super(e,t)}run(){let e=[this._sourcePos],t=new Set;for(;e.length;){let{x:i,y:n}=e.pop();if(this._expandedCells.push({x:i,y:n}),this.isTarget({x:i,y:n})){this._path=this._expandedCells;return}t.add(`${i},${n}`);for(let[r,s]of this._directions){let c={x:i+r,y:n+s};this.canAccessCell(c)&&!t.has(`${c.x},${c.y}`)&&e.push(c)}}}};var J=class extends g{constructor(e,t,i,n=F){super(e,t,i,n)}run(){let e=new p(this._sourcePos,null,0,this._heuristic(this._sourcePos,this._targetPos)),t=new Set;for(;;){if(this._expandedCells.push(e.position),w(e.position,this._targetPos)){this._path=this.backtrackingPath(e);return}t.add(`${e.position.x},${e.position.y}`);let i=null,n=1/0;for(let[r,s]of this._directions){let c={x:e.position.x+r,y:e.position.y+s};if(this.canAccessCell(c)&&!t.has(`${c.x},${c.y}`)){let C=this._heuristic(c,this._targetPos);C<n&&(n=C,i=new p(c,e,0,C))}}if(!i||n>=e.distanceToTarget){this._path=this.backtrackingPath(i),console.log("Reached a local minimum or dead end");return}e=i}}};var L=class o{mazeBuilderService=_(x);mazeInteractionService=_(z);BUILD_EXPANDED_DELAY=30;_pathGenerationTimeout=[];updateMazeWith(e,t,i=0){e.forEach((n,r)=>{this._pathGenerationTimeout.push(setTimeout(()=>this.mazeBuilderService.updateCellType(n,t),this.BUILD_EXPANDED_DELAY*(i+r+1)))})}createAlgorithmObject(){let{sourcePos:e,targetPos:t,mazeAsStringMatrix:i}=this.mazeBuilderService;switch(this.mazeInteractionService.selectedAlgorithm){case"A*":return new U(i,e,t);case"DFS":return new Z(i,e);case"BFS":return new Y(i,e);case"Best First Search":return new X(i,e,t);case"HillClimb":return new J(i,e,t)}}runSearchAlgorithm(){this.mazeBuilderService.clear(4),this.mazeBuilderService.clear(5),this._pathGenerationTimeout.forEach(clearTimeout);let{sourcePos:e,targetPos:t}=this.mazeBuilderService;if(!e||!t){console.log("No surce or no target was setted");return}let i=this.createAlgorithmObject();i.run(),this.updateMazeWith(i.expanded,5),this.updateMazeWith(i.path,4,i.expanded.length)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=A({token:o,factory:o.\u0275fac})};var Ce=(o,e)=>({x:o,y:e});function _e(o,e){if(o&1){let t=j();a(0,"app-cell",2),u("cellOnClick",function(n){O(t);let r=k(2);return D(r.changeCellType(n))}),l()}if(o&2){let t=e.$implicit;f("type",t.type)("position",ce(2,Ce,t.position.x,t.position.y))}}function xe(o,e){if(o&1&&(a(0,"div",0),b(1,_e,1,5,"app-cell",1,S),l()),o&2){let t=e.$implicit;m(),v(t)}}var K=class o{dimension=$(16,{alias:"size"});mazeBuilderService=_(x);mazeInteractionService=_(z);mazeCells=this.mazeBuilderService.mazeMatrixAsSignal;ngOnInit(){this.mazeBuilderService.buildMaze(this.dimension())}changeCellType(e){this.mazeBuilderService.turnCellInto(e,this.mazeInteractionService.turnCellInto)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-maze"]],hostAttrs:[1,"w-100","h-100","bg-grey-3","centered-items"],inputs:{dimension:[1,"size","dimension"]},standalone:!0,features:[M],decls:3,vars:0,consts:[[1,"d-flex"],[3,"type","position"],[3,"cellOnClick","type","position"]],template:function(t,i){t&1&&(a(0,"main"),b(1,xe,3,0,"div",0,S),l()),t&2&&(m(),v(i.mazeCells()))},dependencies:[T,G],encapsulation:2})};var ye=o=>({"bg-grey-3 selected":o});function Pe(o,e){if(o&1){let t=j();a(0,"li",14),u("click",function(){let n=O(t).$implicit,r=k();return D(r.selectAlgorithm(n))}),h(1),l()}if(o&2){let t=e.$implicit,i=k();f("ngClass",q(2,ye,t===i.selectedAlgorithm())),m(),le(" ",t," ")}}function Se(o,e){if(o&1){let t=j();a(0,"div",10)(1,"input",15),u("change",function(){let n=O(t).$implicit,r=k();return D(r.selectTurnCellInto(n.value))}),l(),a(2,"span",3),h(3),l()()}if(o&2){let t=e.$implicit;m(),f("checked",t.value===2),m(2),V(t.label)}}var Q=class o{mazeInteractionService=_(z);mazeBuilderService=_(x);searchService=_(L);algorithmList=Object.values(N);algorithmListExpanded=!0;selectedAlgorithm=this.mazeInteractionService.selectedAlgorithmAsSignal;turnCellIntoOptions=[{label:"Wall",value:2},{label:"Source",value:0},{label:"Target",value:1}];clearWalls=()=>this.mazeBuilderService.clear(2);clearPath=()=>{this.mazeBuilderService.clear(4),this.mazeBuilderService.clear(5)};clearAll=()=>this.mazeBuilderService.clearMaze();selectTurnCellInto(e){this.mazeInteractionService.turnCellInto=e}selectAlgorithm(e){let t={"A*":"A*",BFS:"BFS",DFS:"DFS","Best First Search":"Best First Search",HillClimb:"HillClimb"};this.mazeInteractionService.selectedAlgorithm=t[e]}runSearchAlgorithm(){this.searchService.runSearchAlgorithm()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-side-bar"]],hostAttrs:[1,"p-4","bg-grey-4"],standalone:!0,features:[R([L]),M],decls:33,vars:5,consts:[[1,"d-flex","align-items-center"],["src","assets/ai-icon.png","alt","Image from a technological brain representing the project logo",1,"mr-4","ai-icon"],[1,"text-blue"],[1,"text-white"],[1,"d-flex","align-items-center","justify-content-between","bg-grey-3","algo-title",3,"click"],["src","assets/algorithm.png",1,"mr-3","algo-icon"],["src","assets/arrow.png",1,"arrow-icon"],[1,"algo-list","mt-3"],[1,"text-white","list-item",3,"ngClass"],[1,"text-white","text-center","w-100","d-block"],[1,"my-3","pl-2","d-flex","align-items-center"],[1,"btn-secondary","mb-2",3,"click"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"text-white","list-item",3,"click","ngClass"],["type","radio","name","turnCellOption",1,"mr-3","mt-0",3,"change","checked"]],template:function(t,i){t&1&&(a(0,"div",0),d(1,"img",1),a(2,"h1")(3,"span",2),h(4,"MAZE"),l(),d(5,"br"),a(6,"span",3),h(7,"A.I"),l()()(),d(8,"hr"),a(9,"span",4),u("click",function(){return i.algorithmListExpanded=!i.algorithmListExpanded}),a(10,"div",0),d(11,"img",5),a(12,"p",3),h(13,"Algorithm"),l()(),d(14,"img",6),l(),a(15,"ul",7),b(16,Pe,2,4,"li",8,S),l(),d(18,"hr"),a(19,"span",9),h(20,"Turn cell on click:"),l(),b(21,Se,4,2,"div",10,S),d(23,"hr"),a(24,"button",11),u("click",function(){return i.clearWalls()}),h(25,"Clear Walls"),l(),a(26,"button",11),u("click",function(){return i.clearPath()}),h(27,"Clear Path"),l(),a(28,"button",12),u("click",function(){return i.clearAll()}),h(29,"Clear ALL"),l(),d(30,"hr"),a(31,"button",13),u("click",function(){return i.runSearchAlgorithm()}),h(32,"Run"),l()),t&2&&(m(14),ie("closed",!i.algorithmListExpanded),m(),ie("hide",!i.algorithmListExpanded),ae("aria-expanded",i.algorithmListExpanded),m(),v(i.algorithmList),m(5),v(i.turnCellIntoOptions))},dependencies:[T,E],styles:['[_nghost-%COMP%]{position:fixed;width:208px;height:calc(100vh - 48px);overflow:scroll;-ms-overflow-style:none;scrollbar-width:none}[_nghost-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .ai-icon[_ngcontent-%COMP%]{width:64px;height:64px}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]{height:16px;width:16px;cursor:pointer}hr[_ngcontent-%COMP%]{background-color:#2d2f39;height:3px;border:0;margin-top:24px;margin-bottom:24px}.algo-title[_ngcontent-%COMP%]{border-radius:5px;padding:10px 12px;cursor:pointer;height:20px}.algo-title[_ngcontent-%COMP%]   .algo-icon[_ngcontent-%COMP%]{width:20px;height:20px}.algo-title[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:16px;height:16px;transition:all .7s cubic-bezier(.19,1,.22,1)}.algo-title[_ngcontent-%COMP%]   .arrow-icon.closed[_ngcontent-%COMP%]{transform:rotate(-180deg)}.algo-list[_ngcontent-%COMP%]{list-style-type:none;position:relative;padding-inline-start:40px;max-height:400px;overflow:hidden;transition:all 1s cubic-bezier(.19,1,.22,1)}.algo-list.hide[_ngcontent-%COMP%]{max-height:0}.algo-list[_ngcontent-%COMP%]:before{content:"";position:absolute;height:100%;left:20px;top:-26px;margin-right:4px;border-left:3px solid #2D2F39}.algo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding:10px 16px;cursor:pointer}.algo-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:-20px;height:20px;width:20px;border:3px solid #2D2F39;border-bottom-left-radius:15px;border-right:none;border-top:none}.algo-list[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border-radius:5px}']})};var be=o=>({"mr-4":o});function ve(o,e){if(o&1&&(a(0,"div",3),d(1,"div",4),a(2,"span",5),h(3),l()()),o&2){let t=e.$implicit,i=e.$index,n=e.$count;f("ngClass",q(3,be,i!==n-1)),m(),f("ngClass",t.color),m(2),V(t.label)}}var ge=class o{legendItems=[{label:"Empty",color:y[3]},{label:"Wall",color:y[2]},{label:"Source",color:y[0]},{label:"Target",color:y[1]},{label:"Path",color:y[4]},{label:"Expanded",color:y[5]}];static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-main"]],hostAttrs:[1,"d-flex"],standalone:!0,features:[R([x]),M],decls:6,vars:1,consts:[[1,"content-wrapper"],[3,"size"],[1,"maze-legend","d-flex","bg-grey-4","px-4","py-3"],[1,"d-flex","align-items-center",3,"ngClass"],[1,"cell","mr-3",3,"ngClass"],[1,"text-white"]],template:function(t,i){t&1&&(d(0,"app-side-bar"),a(1,"div",0),d(2,"app-maze",1),a(3,"article",2),b(4,ve,4,5,"div",3,S),l()()),t&2&&(m(2),f("size",14),m(2),v(i.legendItems))},dependencies:[T,E,Q,K],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100vh;margin-left:256px;position:relative}.maze-legend[_ngcontent-%COMP%]{border-radius:12px;position:absolute;bottom:32px;left:0;right:0;margin-inline:auto;width:fit-content}@media (max-width: 990px){.maze-legend[_ngcontent-%COMP%]{display:none!important}}.cell[_ngcontent-%COMP%]{width:28px;height:28px}"]})};export{ge as MainComponent};
